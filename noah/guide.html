<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>知情同意书</title>
    <link rel="stylesheet" href="css/guide.css" />
  </head>
  <body>
  <div class="container">
    <div style="display: flex; justify-content: center; align-items: center; min-height: 100vh;">
        <img
            src="images/agree/RYG.svg"
            alt="RYG"
            style="position: absolute; left: 2%; top: 2%; display: block; width: 5%; height: auto;" >
        <img
            src="images/agree/back.svg"
            alt="返回"
            style="position: absolute; left: 4%; top: 6%; display: block; width: 1.8%; height: auto; cursor: pointer;" onclick="window.location.href='agree.html'">
        <img
            src="images/guide/guide.svg"
            alt="测试提醒"
            style="position: absolute; left: 15%; bottom: 10%; display: block; width: 90%; height: auto;"
        />
        <img
            src="images/agree/seal.svg" alt="海豹" style="position: absolute; left: 10%; bottom: 10%; display: block; width: 20%; height: auto;">
            
        <div
          id="btn"
          style="position: absolute; left: 37%; bottom: 6%; width: 40vw; height: 20vw; cursor: pointer; display: flex; justify-content: center; align-items: center;"
        >
        <img
          src="images/guide/guidement.svg"
          alt="同意"
          style="width: 100%; height: 100%;"
        />
        <div
          style="color: #ffffff; position: absolute; right: 38%; bottom: 44%; font-size: 1.8vw; font-weight: 500; pointer-events: none;"
        >
          同意并继续
        </div>
      </div>
        
        </div>
        </div>
        </div>
<script>
  const btn = document.getElementById('btn');
  const reminderText = "你好同学，这里是一些作答提醒，希望你可以认真听完。每次进入一个新题目时，会有语音和文本告诉你这题是什么内容。你可以先想一想，认真思考题目。想好了，就点击“回复”按钮开始作答。你作答完后，直接点击页面右下角的“下一题”按钮就可以进入下一题。如果中途退出或者不完成作答，之前的答案不会被保存，需要重新作答，谢谢你听到这里，开始答题吧！";

  function playReminderVoice(text) {
    if (!("speechSynthesis" in window)) {
      alert("您的浏览器不支持语音合成功能");
      return;
    }
    const utterance = new SpeechSynthesisUtterance(text);
    const voices = speechSynthesis.getVoices();
    utterance.voice = voices.find(v => v.lang.startsWith("zh")) || null;
    speechSynthesis.speak(utterance);
  }

  // 页面加载自动播放语音
  window.onload = () => {
    playReminderVoice(reminderText);
  };

  // 点击按钮跳转，先停止语音播放
  btn.addEventListener('click', () => {
    if ("speechSynthesis" in window && speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    const urlParams = new URLSearchParams(window.location.search);
    const testId = urlParams.get('test') || '';

    document.body.style.transition = 'opacity 0.8s';
    document.body.style.opacity = 0;

    setTimeout(() => {
      location.href = `questionnaire.html?test=${encodeURIComponent(testId)}`;
    }, 800);
  });

  // 离开页面时停止语音播放
  window.addEventListener('beforeunload', () => {
    if ("speechSynthesis" in window && speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
  });
</script>


  </body>
</html>
